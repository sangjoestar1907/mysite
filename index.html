<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Saki Hub - Blox Fruits Event Tracker</title>
  <link rel="icon" type="image/png" href="logo.png">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #0c0c0c 0%, #1a1a2e 50%, #16213e 100%);
      color: #fff;
      min-height: 100vh;
      overflow-x: hidden;
    }

    /* Header */
    header {
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 15px 0;
      background: rgba(0, 0, 0, 0.9);
      backdrop-filter: blur(10px);
      position: sticky;
      top: 0;
      z-index: 1000;
      border-bottom: 1px solid #333;
    }

    .logo {
      font-size: 24px;
      font-weight: bold;
      cursor: pointer;
      color: #fff;
      padding: 8px 16px;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 12px;
      background: linear-gradient(45deg, #ff6b6b, #feca57);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .logo img {
      height: 32px;
      border-radius: 8px;
    }

    .logo:hover {
      transform: scale(1.05);
    }

    /* Menu Button */
    .dropbtn {
      position: absolute;
      left: 20px;
      top: 50%;
      transform: translateY(-50%);
      background: rgba(255, 255, 255, 0.1);
      color: #fff;
      padding: 12px 16px;
      font-size: 20px;
      border: none;
      cursor: pointer;
      border-radius: 8px;
      transition: all 0.3s ease;
      backdrop-filter: blur(10px);
    }

    .dropbtn:hover {
      background: rgba(255, 255, 255, 0.2);
      transform: translateY(-50%) scale(1.1);
    }

    /* Sidebar */
    .dropdown-content {
      height: 100vh;
      width: 280px;
      position: fixed;
      top: 0;
      left: -280px;
      background: rgba(0, 0, 0, 0.95);
      backdrop-filter: blur(20px);
      overflow-x: hidden;
      transition: left 0.4s ease, opacity 0.4s ease;
      z-index: 2000;
      padding-top: 0;
      opacity: 0;
      border-right: 1px solid #333;
    }

    .dropdown-content.show {
      left: 0;
      opacity: 1;
    }

    .sidebar-logo {
      color: #fff;
      font-size: 22px;
      margin: 0;
      padding: 25px 20px;
      text-align: left;
      background: linear-gradient(45deg, #ff6b6b, #feca57);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      font-weight: bold;
      border-bottom: 1px solid #333;
    }

    .dropdown-content a {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 18px 25px;
      color: #fff;
      text-decoration: none;
      transition: all 0.3s ease;
      border-left: 4px solid transparent;
    }

    .dropdown-content a i {
      width: 20px;
      text-align: center;
    }

    .dropdown-content a:hover {
      background: rgba(255, 255, 255, 0.1);
      border-left: 4px solid #feca57;
      padding-left: 30px;
    }

    .dropdown-content a.active {
      background: rgba(254, 202, 87, 0.1);
      border-left: 4px solid #feca57;
    }

    /* Main Content */
    .container {
      max-width: 1200px;
      margin: 40px auto;
      padding: 30px;
      background: rgba(255, 255, 255, 0.05);
      backdrop-filter: blur(10px);
      border-radius: 20px;
      border: 1px solid rgba(255, 255, 255, 0.1);
      opacity: 0;
      transform: translateY(20px);
      transition: all 0.5s ease;
    }

    .container.show {
      opacity: 1;
      transform: translateY(0);
    }

    /* Overlay */
    #overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, #0c0c0c 0%, #1a1a2e 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 3000;
      transition: opacity 0.5s ease;
    }

    #overlay.hide {
      opacity: 0;
      pointer-events: none;
    }

    .spinner {
      border: 4px solid rgba(255, 255, 255, 0.1);
      border-top: 4px solid #feca57;
      border-radius: 50%;
      width: 60px;
      height: 60px;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    /* Buttons */
    .btn {
      padding: 12px 24px;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      cursor: pointer;
      transition: all 0.3s ease;
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      font-weight: 600;
    }

    .btn-primary {
      background: linear-gradient(45deg, #ff6b6b, #feca57);
      color: #000;
    }

    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(254, 202, 87, 0.3);
    }

    .btn-discord {
      background: #5865F2;
      color: white;
    }

    .btn-discord:hover {
      background: #4752c4;
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(88, 101, 242, 0.3);
    }

    /* Cards */
    .card {
      background: rgba(255, 255, 255, 0.05);
      border-radius: 12px;
      padding: 24px;
      margin: 20px 0;
      border: 1px solid rgba(255, 255, 255, 0.1);
      transition: all 0.3s ease;
    }

    .card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
    }

    .card h3 {
      color: #feca57;
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    /* Event Status */
    .event-status {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 10px;
      background: rgba(255, 255, 255, 0.05);
      border-radius: 8px;
      margin: 10px 0;
    }

    .status-indicator {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background: #4CAF50;
    }

    .status-indicator.inactive {
      background: #f44336;
    }

    /* Event Log */
    .event-log {
      max-height: 400px;
      overflow-y: auto;
      margin: 15px 0;
    }

    .event-item {
      background: rgba(255, 255, 255, 0.03);
      border-left: 4px solid #feca57;
      padding: 12px 15px;
      margin: 8px 0;
      border-radius: 0 8px 8px 0;
    }

    .event-item.success {
      border-left-color: #4CAF50;
    }

    .event-item.error {
      border-left-color: #f44336;
    }

    .event-time {
      font-size: 12px;
      color: #888;
      margin-top: 5px;
    }

    /* Server List */
    .server-list {
      display: flex;
      flex-direction: column;
      gap: 10px;
      margin: 15px 0;
    }

    .server-item {
      background: rgba(255, 255, 255, 0.03);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 8px;
      padding: 15px;
      font-family: 'Courier New', monospace;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .server-info {
      display: flex;
      flex-direction: column;
      gap: 5px;
    }

    .server-job {
      color: #feca57;
      font-weight: bold;
    }

    .server-players {
      color: #4CAF50;
    }

    .server-wait {
      color: #ff6b6b;
    }

    .server-actions {
      display: flex;
      gap: 10px;
    }

    .copy-btn {
      background: rgba(255, 255, 255, 0.1);
      color: white;
      border: none;
      padding: 5px 10px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 12px;
      transition: all 0.3s ease;
    }

    .copy-btn:hover {
      background: rgba(255, 255, 255, 0.2);
    }

    /* Custom Dropdown */
    .custom-dropdown {
      position: relative;
      width: 100%;
      margin: 15px 0;
    }

    .dropdown-header {
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 8px;
      padding: 15px;
      cursor: pointer;
      display: flex;
      justify-content: space-between;
      align-items: center;
      transition: all 0.3s ease;
    }

    .dropdown-header:hover {
      background: rgba(255, 255, 255, 0.1);
    }

    .dropdown-header.active {
      border-bottom-left-radius: 0;
      border-bottom-right-radius: 0;
      border-bottom: none;
    }

    .dropdown-content-events {
      position: absolute;
      top: 100%;
      left: 0;
      width: 100%;
      background: rgba(0, 0, 0, 0.95);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-top: none;
      border-radius: 0 0 8px 8px;
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.3s ease;
      z-index: 10;
    }

    .dropdown-content-events.show {
      max-height: 400px;
      overflow-y: auto;
    }

    .event-option {
      padding: 15px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.05);
      display: flex;
      justify-content: space-between;
      align-items: center;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .event-option:last-child {
      border-bottom: none;
    }

    .event-option:hover {
      background: rgba(255, 255, 255, 0.05);
    }

    .event-name {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .event-world {
      font-size: 12px;
      color: #888;
    }

    /* Event API Panel */
    .event-api-panel {
      margin-top: 20px;
      background: rgba(255, 255, 255, 0.03);
      border-radius: 8px;
      padding: 20px;
      border: 1px solid rgba(255, 255, 255, 0.1);
      display: none;
    }

    .event-api-panel.show {
      display: block;
      animation: fadeIn 0.3s ease;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(-10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .event-api-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
      padding-bottom: 10px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    .event-api-title {
      color: #feca57;
      font-size: 18px;
    }

    .close-api {
      background: none;
      border: none;
      color: #fff;
      font-size: 18px;
      cursor: pointer;
      padding: 5px;
      border-radius: 4px;
      transition: all 0.3s ease;
    }

    .close-api:hover {
      background: rgba(255, 255, 255, 0.1);
    }

    .api-url {
      background: rgba(0, 0, 0, 0.3);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 8px;
      padding: 15px;
      margin: 15px 0;
      font-family: 'Courier New', monospace;
      word-break: break-all;
      display: flex;
      justify-content: between;
      align-items: center;
    }

    .api-url code {
      color: #feca57;
      flex: 1;
    }

    .copy-api-btn {
      background: rgba(255, 255, 255, 0.1);
      color: white;
      border: none;
      padding: 8px 12px;
      border-radius: 4px;
      cursor: pointer;
      margin-left: 10px;
      transition: all 0.3s ease;
    }

    .copy-api-btn:hover {
      background: rgba(255, 255, 255, 0.2);
    }

    .api-description {
      margin-top: 15px;
      padding: 15px;
      background: rgba(255, 255, 255, 0.03);
      border-radius: 8px;
    }

    .api-method {
      display: inline-block;
      background: #4CAF50;
      color: white;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 12px;
      font-weight: bold;
      margin-right: 10px;
    }

    .api-method.get {
      background: #2196F3;
    }

    .api-method.post {
      background: #FF9800;
    }

    /* Footer */
    footer {
      text-align: center;
      padding: 30px;
      margin-top: 50px;
      border-top: 1px solid #333;
      background: rgba(0, 0, 0, 0.8);
    }

    /* Responsive */
    @media (max-width: 768px) {
      .container {
        margin: 20px;
        padding: 20px;
      }
      
      .dropdown-content {
        width: 250px;
        left: -250px;
      }
      
      .server-item {
        flex-direction: column;
        align-items: flex-start;
        gap: 10px;
      }
      
      .server-actions {
        align-self: flex-end;
      }
      
      .api-url {
        flex-direction: column;
        gap: 10px;
      }
      
      .copy-api-btn {
        margin-left: 0;
        width: 100%;
      }
    }
  </style>
</head>
<body>

<div id="overlay">
  <div class="spinner"></div>
</div>

<header>
  <button class="dropbtn" id="menuBtn">
    <i class="fas fa-bars"></i>
  </button>
  <div class="logo" id="logo">
    <img src="logo.png" alt="Saki Hub Logo">
    Saki Hub
  </div>
</header>

<div class="dropdown-content" id="dropdownMenu">
  <div class="sidebar-logo">
    <i class="fas fa-cube"></i>
    Saki Hub
  </div>
  <a href="#" data-page="home" class="active">
    <i class="fas fa-home"></i>
    Trang Ch·ªß
  </a>
  <a href="#" data-page="events">
    <i class="fas fa-calendar-alt"></i>
    S·ª± Ki·ªán Game
  </a>
  <a href="#" data-page="servers">
    <i class="fas fa-server"></i>
    Servers
  </a>
  <a href="#" data-page="script">
    <i class="fas fa-code"></i>
    Script
  </a>
  <a href="#" data-page="connect">
    <i class="fas fa-users"></i>
    K·∫øt N·ªëi
  </a>
  <a href="#" data-page="api">
    <i class="fas fa-database"></i>
    API Documentation
  </a>
</div>

<div class="container" id="mainContent">
  <!-- N·ªôi dung s·∫Ω ƒë∆∞·ª£c thay ƒë·ªïi b·∫±ng JavaScript -->
</div>

<footer>
  <p>&copy; 2024 Saki Hub. All rights reserved.</p>
  <p>Blox Fruits Event Tracking System</p>
</footer>

<script>
  const overlay = document.getElementById('overlay');
  const menuBtn = document.getElementById('menuBtn');
  const dropdownMenu = document.getElementById('dropdownMenu');
  const mainContent = document.getElementById('mainContent');
  const logo = document.getElementById('logo');

  // API Configuration
  const API_BASE_URL = 'https://saki-hub.vercel.app/api';
  let eventsLog = [];
  let activeServers = [];

  // Database th·∫≠t - CH·ªà L∆ØU DATA TH·∫¨T
  let eventsDatabase = [];

  // Danh s√°ch s·ª± ki·ªán Blox Fruits v·ªõi API endpoints
  const eventsList = [
    { 
      name: "Full Moon", 
      world: "World 3", 
      active: false, 
      color: "#4CAF50",
      api_endpoint: "full-moon",
      description: "S·ª± ki·ªán Full Moon xu·∫•t hi·ªán khi trƒÉng tr√≤n, cho ph√©p ng∆∞·ªùi ch∆°i bi·∫øn th√†nh s√≥i v√† nh·∫≠n c√°c buff ƒë·∫∑c bi·ªát."
    },
    { 
      name: "Near Full Moon", 
      world: "World 3", 
      active: false, 
      color: "#FF9800",
      api_endpoint: "near-full-moon",
      description: "S·ª± ki·ªán Near Full Moon xu·∫•t hi·ªán khi trƒÉng g·∫ßn tr√≤n, chu·∫©n b·ªã cho s·ª± ki·ªán Full Moon s·∫Øp t·ªõi."
    },
    { 
      name: "Mystic Island", 
      world: "World 3", 
      active: false, 
      color: "#2196F3",
      api_endpoint: "mystic-island",
      description: "H√≤n ƒë·∫£o th·∫ßn b√≠ xu·∫•t hi·ªán ng·∫´u nhi√™n v·ªõi c√°c boss v√† ph·∫ßn th∆∞·ªüng ƒë·ªôc quy·ªÅn."
    },
    { 
      name: "Rip Indra True Form", 
      world: "World 3", 
      active: false, 
      color: "#F44336",
      api_endpoint: "rip-indra-true-form",
      description: "S·ª± ki·ªán boss Rip Indra True Form v·ªõi ƒë·ªô kh√≥ cao v√† ph·∫ßn th∆∞·ªüng gi√° tr·ªã."
    },
    { 
      name: "Dough King", 
      world: "World 3", 
      active: false, 
      color: "#9C27B0",
      api_endpoint: "dough-king",
      description: "Vua Dough King xu·∫•t hi·ªán v·ªõi c√°c tay sai v√† ph·∫ßn th∆∞·ªüng Dough Fruit ƒë·ªôc quy·ªÅn."
    },
    { 
      name: "Darkbeard", 
      world: "World 2", 
      active: false, 
      color: "#607D8B",
      api_endpoint: "darkbeard",
      description: "Darkbeard - boss h·∫£i t·∫∑c v·ªõi s·ª©c m·∫°nh b√≥ng t·ªëi v√† ph·∫ßn th∆∞·ªüng Dark Fruit."
    },
    { 
      name: "Cursed Captain", 
      world: "World 2", 
      active: false, 
      color: "#795548",
      api_endpoint: "cursed-captain",
      description: "Thuy·ªÅn tr∆∞·ªùng b·ªã nguy·ªÅn r·ªßa v·ªõi c√°c k·ªπ nƒÉng ƒë·ªôc ƒë√°o v√† ph·∫ßn th∆∞·ªüng qu√Ω hi·∫øm."
    }
  ];

  // H√†m g·ªçi API - CH·ªà NH·∫¨N DATA TH·∫¨T
  async function callAPI(endpoint, method = 'GET', data = null) {
    try {
      const options = {
        method: method,
        headers: {
          'Content-Type': 'application/json',
        }
      };

      if (data && (method === 'POST' || method === 'PUT')) {
        options.body = JSON.stringify(data);
      }

      const response = await fetch(`${API_BASE_URL}${endpoint}`, options);
      const result = await response.json();
      
      addToLog(`${method} ${endpoint}`, result.success ? 'success' : 'error', result);
      
      return result;
    } catch (error) {
      console.error('API Error:', error);
      addToLog(`${method} ${endpoint}`, 'error', { error: error.message });
      return { success: false, error: error.message };
    }
  }

  // H√†m th√™m v√†o log
  function addToLog(action, type, data) {
    const logItem = {
      id: Date.now(),
      action,
      type,
      data,
      timestamp: new Date().toLocaleString('vi-VN')
    };
    
    eventsLog.unshift(logItem);
    if (eventsLog.length > 50) eventsLog = eventsLog.slice(0, 50);
    
    if (document.getElementById('eventsLog')) {
      updateEventsLog();
    }
  }

  // H√†m c·∫≠p nh·∫≠t log UI
  function updateEventsLog() {
    const logContainer = document.getElementById('eventsLog');
    if (!logContainer) return;

    logContainer.innerHTML = eventsLog.map(item => `
      <div class="event-item ${item.type}">
        <div><strong>${item.action}</strong> - ${item.type === 'success' ? '‚úÖ' : '‚ùå'}</div>
        <div>${JSON.stringify(item.data)}</div>
        <div class="event-time">${item.timestamp}</div>
      </div>
    `).join('');
  }

  // H√†m test API
  async function testAPI() {
    const testData = {
      event_type: "test_event",
      boss_name: "Test Boss",
      players: "5/10",
      job_id: "test_" + Date.now(),
      world: "World3",
      timestamp: new Date().toISOString()
    };

    const result = await callAPI('/events', 'POST', testData);
    
    if (result.success) {
      alert('‚úÖ Test API th√†nh c√¥ng! Data ƒë√£ ƒë∆∞·ª£c l∆∞u.');
      loadEvents();
      loadServers();
    } else {
      alert('‚ùå Test API th·∫•t b·∫°i: ' + (result.error || 'Unknown error'));
    }
  }

  // H√†m load events t·ª´ API
  async function loadEvents() {
    const result = await callAPI('/events', 'GET');
    
    if (result.success && result.events) {
      const eventsContainer = document.getElementById('realTimeEvents');
      if (eventsContainer) {
        if (result.events.length === 0) {
          eventsContainer.innerHTML = `
            <div class="event-item">
              <div><strong>üîÑ ƒêang ch·ªù d·ªØ li·ªáu t·ª´ Roblox</strong></div>
              <div>Ch·∫°y script trong game ƒë·ªÉ th·∫•y events th·∫≠t</div>
            </div>
          `;
        } else {
          eventsContainer.innerHTML = result.events.map(event => `
            <div class="event-item success">
              <div><strong>${event.boss_name || event.event_type}</strong></div>
              <div>Server: ${event.job_id || 'N/A'} | Players: ${event.players || 'N/A'}</div>
              <div>World: ${event.world || 'N/A'} | Time: ${event.time_of_day || 'N/A'}</div>
              <div class="event-time">${new Date(event.received_at).toLocaleString('vi-VN')}</div>
            </div>
          `).join('');
        }
      }
    }
  }

  // H√†m load servers t·ª´ API
  async function loadServers() {
    const result = await callAPI('/events', 'GET');
    
    if (result.success && result.events) {
      const serversMap = new Map();
      
      result.events.forEach(event => {
        if (event.job_id) {
          if (!serversMap.has(event.job_id)) {
            serversMap.set(event.job_id, {
              job_id: event.job_id,
              players: event.players || 'N/A',
              last_event: event.event_type,
              timestamp: event.received_at
            });
          }
        }
      });
      
      activeServers = Array.from(serversMap.values());
      updateServersDisplay();
    }
  }

  // H√†m hi·ªÉn th·ªã servers
  function updateServersDisplay() {
    const serversContainer = document.getElementById('serversList');
    if (!serversContainer) return;

    if (activeServers.length === 0) {
      serversContainer.innerHTML = `
        <div class="server-item">
          <div class="server-info">
            <div class="server-job">üîÑ ƒêang ch·ªù d·ªØ li·ªáu...</div>
            <div>
              <span class="server-players">Ch·∫°y script Roblox ƒë·ªÉ th·∫•y servers th·∫≠t</span>
            </div>
          </div>
        </div>
      `;
    } else {
      serversContainer.innerHTML = activeServers.map(server => `
        <div class="server-item">
          <div class="server-info">
            <div class="server-job">Job: ${server.job_id}..</div>
            <div>
              <span class="server-players">Players: ${server.players}</span>
              <span class="server-wait"> | Event: ${server.last_event}</span>
            </div>
          </div>
          <div class="server-actions">
            <button class="copy-btn" onclick="copyJobId('${server.job_id}')">
              <i class="fas fa-copy"></i> Copy
            </button>
          </div>
        </div>
      `).join('');
    }
  }

  // H√†m copy Job ID
  function copyJobId(jobId) {
    navigator.clipboard.writeText(jobId).then(() => {
      alert(`ƒê√£ copy Job ID: ${jobId}`);
    }).catch(err => {
      console.error('L·ªói copy: ', err);
    });
  }

  // H√†m copy API URL
  function copyApiUrl(url) {
    navigator.clipboard.writeText(url).then(() => {
      alert(`‚úÖ ƒê√£ copy API URL: ${url}`);
    }).catch(err => {
      console.error('L·ªói copy: ', err);
    });
  }

  // H√†m t·∫°o dropdown s·ª± ki·ªán
  function createEventsDropdown() {
    return `
      <div class="custom-dropdown" id="eventsDropdown">
        <div class="dropdown-header" id="dropdownHeader">
          <div>
            <strong><i class="fas fa-calendar-alt"></i> T·∫•t C·∫£ S·ª± Ki·ªán Blox Fruits</strong>
            <div class="event-world">Ch·ªçn m·ªôt s·ª± ki·ªán ƒë·ªÉ xem API endpoint</div>
          </div>
          <i class="fas fa-chevron-down" id="dropdownArrow"></i>
        </div>
        <div class="dropdown-content-events" id="dropdownEvents">
          ${eventsList.map(event => `
            <div class="event-option" data-event="${event.name}">
              <div class="event-name">
                <div class="status-indicator ${event.active ? '' : 'inactive'}"></div>
                <div>
                  <strong style="color: ${event.color}">${event.name}</strong>
                  <div class="event-world">${event.world}</div>
                </div>
              </div>
              <div>
                <span style="color: ${event.active ? '#4CAF50' : '#888'}">
                  ${event.active ? 'ƒêang ho·∫°t ƒë·ªông' : 'Ch∆∞a ph√°t hi·ªán'}
                </span>
              </div>
            </div>
          `).join('')}
        </div>
      </div>
    `;
  }

  // H√†m t·∫°o panel hi·ªÉn th·ªã API endpoint cho s·ª± ki·ªán
  function createEventApiPanel() {
    return `
      <div class="event-api-panel" id="eventApiPanel">
        <div class="event-api-header">
          <div class="event-api-title" id="eventApiTitle">
            <i class="fas fa-code"></i> API Endpoint: <span id="selectedEventName"></span>
          </div>
          <button class="close-api" id="closeApi">
            <i class="fas fa-times"></i>
          </button>
        </div>
        
        <div class="api-url">
          <code id="apiUrlText">${API_BASE_URL}/events/</code>
          <button class="copy-api-btn" id="copyApiBtn">
            <i class="fas fa-copy"></i> Copy URL
          </button>
        </div>
        
        <div class="api-description">
          <h4><i class="fas fa-info-circle"></i> Th√¥ng tin s·ª± ki·ªán:</h4>
          <p id="eventDescription">Ch·ªçn m·ªôt s·ª± ki·ªán ƒë·ªÉ xem m√¥ t·∫£ chi ti·∫øt.</p>
          
          <div style="margin-top: 15px;">
            <h4><i class="fas fa-cogs"></i> C√°ch s·ª≠ d·ª•ng API:</h4>
            <p><span class="api-method get">GET</span> L·∫•y th√¥ng tin s·ª± ki·ªán hi·ªán t·∫°i</p>
            <p><span class="api-method post">POST</span> G·ª≠i d·ªØ li·ªáu s·ª± ki·ªán m·ªõi</p>
            
            <div style="margin-top: 10px; padding: 10px; background: rgba(255,255,255,0.05); border-radius: 5px;">
              <strong>V√≠ d·ª• GET request:</strong>
              <pre style="margin: 5px 0; color: #feca57;">fetch('${API_BASE_URL}/events/full-moon')
  .then(response => response.json())
  .then(data => console.log(data));</pre>
            </div>
          </div>
        </div>
      </div>
    `;
  }

  // H√†m hi·ªÉn th·ªã API endpoint cho s·ª± ki·ªán ƒë∆∞·ª£c ch·ªçn
  function showEventApi(eventName) {
    const panel = document.getElementById('eventApiPanel');
    const title = document.getElementById('selectedEventName');
    const apiUrl = document.getElementById('apiUrlText');
    const description = document.getElementById('eventDescription');
    
    if (panel && title && apiUrl && description) {
      // T√¨m th√¥ng tin s·ª± ki·ªán
      const eventInfo = eventsList.find(event => event.name === eventName);
      
      if (eventInfo) {
        // C·∫≠p nh·∫≠t ti√™u ƒë·ªÅ
        title.textContent = eventName;
        
        // C·∫≠p nh·∫≠t API URL
        const fullApiUrl = `${API_BASE_URL}/events/${eventInfo.api_endpoint}`;
        apiUrl.textContent = fullApiUrl;
        
        // C·∫≠p nh·∫≠t m√¥ t·∫£
        description.textContent = eventInfo.description;
        
        // C·∫≠p nh·∫≠t s·ª± ki·ªán click cho n√∫t copy
        const copyBtn = document.getElementById('copyApiBtn');
        if (copyBtn) {
          copyBtn.onclick = () => copyApiUrl(fullApiUrl);
        }
        
        // Hi·ªÉn th·ªã panel
        panel.classList.add('show');
      }
    }
  }

  // H√†m kh·ªüi t·∫°o dropdown s·ª± ki·ªán
  function initEventsDropdown() {
    const dropdownHeader = document.getElementById('dropdownHeader');
    const dropdownEvents = document.getElementById('dropdownEvents');
    const dropdownArrow = document.getElementById('dropdownArrow');
    
    if (dropdownHeader && dropdownEvents) {
      dropdownHeader.addEventListener('click', () => {
        dropdownEvents.classList.toggle('show');
        dropdownHeader.classList.toggle('active');
        dropdownArrow.classList.toggle('fa-chevron-down');
        dropdownArrow.classList.toggle('fa-chevron-up');
      });
      
      // ƒê√≥ng dropdown khi click ra ngo√†i
      document.addEventListener('click', (e) => {
        if (!e.target.closest('.custom-dropdown')) {
          dropdownEvents.classList.remove('show');
          dropdownHeader.classList.remove('active');
          dropdownArrow.classList.add('fa-chevron-down');
          dropdownArrow.classList.remove('fa-chevron-up');
        }
      });
      
      // X·ª≠ l√Ω ch·ªçn s·ª± ki·ªán
      const eventOptions = document.querySelectorAll('.event-option');
      eventOptions.forEach(option => {
        option.addEventListener('click', () => {
          const eventName = option.getAttribute('data-event');
          
          // ƒê√≥ng dropdown
          dropdownEvents.classList.remove('show');
          dropdownHeader.classList.remove('active');
          dropdownArrow.classList.add('fa-chevron-down');
          dropdownArrow.classList.remove('fa-chevron-up');
          
          // Hi·ªÉn th·ªã API endpoint cho s·ª± ki·ªán ƒë∆∞·ª£c ch·ªçn
          showEventApi(eventName);
        });
      });
    }
    
    // X·ª≠ l√Ω ƒë√≥ng panel API
    const closeApi = document.getElementById('closeApi');
    if (closeApi) {
      closeApi.addEventListener('click', () => {
        const panel = document.getElementById('eventApiPanel');
        if (panel) {
          panel.classList.remove('show');
        }
      });
    }
  }

  window.addEventListener('load', () => {
    setTimeout(() => {
      overlay.classList.add('hide');
      setTimeout(() => overlay.style.display = 'none', 500);
      mainContent.classList.add('show');
      
      const page = new URLSearchParams(window.location.search).get("page") || 
                   localStorage.getItem("currentPage") || "home";
      showPage(page);
      updateActiveNav(page);
    }, 1000);
  });

  menuBtn.addEventListener('click', () => {
    dropdownMenu.classList.toggle('show');
  });

  window.addEventListener('click', (e) => {
    if (!menuBtn.contains(e.target) && !dropdownMenu.contains(e.target)) {
      dropdownMenu.classList.remove('show');
    }
  });

  function updateActiveNav(page) {
    const links = dropdownMenu.querySelectorAll('a');
    links.forEach(link => {
      link.classList.remove('active');
      if (link.getAttribute('data-page') === page) {
        link.classList.add('active');
      }
    });
  }

  function showPage(page) {
    overlay.style.display = 'flex';
    overlay.classList.remove('hide');
    mainContent.classList.remove('show');

    setTimeout(() => {
      let content = '';
      
      switch(page) {
        case 'home':
          content = `
            <h1><i class="fas fa-home"></i> Ch√†o M·ª´ng ƒê·∫øn Saki Hub</h1>
            <p>H·ªá th·ªëng theo d√µi s·ª± ki·ªán Blox Fruits t·ª± ƒë·ªông v√† th·ªùi gian th·ª±c</p>
            
            <div class="card">
              <h3><i class="fas fa-star"></i> Gi·ªõi Thi·ªáu</h3>
              <p>Saki Hub cung c·∫•p gi·∫£i ph√°p theo d√µi s·ª± ki·ªán trong game Blox Fruits m·ªôt c√°ch t·ª± ƒë·ªông. H·ªá th·ªëng s·∫Ω th√¥ng b√°o ngay l·∫≠p t·ª©c khi c√≥ s·ª± ki·ªán m·ªõi xu·∫•t hi·ªán.</p>
            </div>

            <div class="card">
              <h3><i class="fas fa-calendar-alt"></i> T·∫•t C·∫£ S·ª± Ki·ªán</h3>
              <p>Ch·ªçn m·ªôt s·ª± ki·ªán ƒë·ªÉ xem API endpoint t∆∞∆°ng ·ª©ng:</p>
              ${createEventsDropdown()}
              ${createEventApiPanel()}
              <p style="margin-top: 15px; font-size: 14px; color: #aaa;">
                <i class="fas fa-info-circle"></i> M·ªói s·ª± ki·ªán c√≥ m·ªôt API endpoint ri√™ng ƒë·ªÉ l·∫•y d·ªØ li·ªáu th·ªùi gian th·ª±c
              </p>
            </div>

            <div class="card">
              <h3><i class="fas fa-plug"></i> Tr·∫°ng th√°i h·ªá th·ªëng</h3>
              <p>API Base URL: <code>${API_BASE_URL}</code></p>
              <p><strong>‚úÖ CH·∫æ ƒê·ªò DATA TH·∫¨T</strong> - Ch·ªâ hi·ªÉn th·ªã d·ªØ li·ªáu t·ª´ Roblox</p>
              <div style="display: flex; gap: 10px; margin-top: 15px;">
                <button onclick="testAPI()" class="btn btn-primary">
                  <i class="fas fa-test"></i> Test API
                </button>
              </div>
            </div>
          `;
          break;

        case 'events':
          content = `
            <h1><i class="fas fa-calendar-alt"></i> S·ª± Ki·ªán Blox Fruits - REAL TIME</h1>
            <p>Theo d√µi t·∫•t c·∫£ s·ª± ki·ªán trong game theo th·ªùi gian th·ª±c</p>
            
            <div class="card">
              <h3><i class="fas fa-list"></i> Danh S√°ch S·ª± Ki·ªán</h3>
              <p>Ch·ªçn m·ªôt s·ª± ki·ªán ƒë·ªÉ xem API endpoint:</p>
              ${createEventsDropdown()}
              ${createEventApiPanel()}
            </div>
            
            <div class="card">
              <h3><i class="fas fa-database"></i> Events t·ª´ Roblox</h3>
              <div class="event-log" id="realTimeEvents">
                <div class="event-item">
                  <div><strong>üîÑ ƒêang ch·ªù d·ªØ li·ªáu...</strong></div>
                  <div>Ch·∫°y script trong game Blox Fruits ƒë·ªÉ th·∫•y events th·∫≠t</div>
                </div>
              </div>
              <div style="display: flex; gap: 10px; margin-top: 15px;">
                <button onclick="loadEvents()" class="btn btn-primary">
                  <i class="fas fa-sync-alt"></i> Refresh Events
                </button>
                <button onclick="testAPI()" class="btn" style="background: #666;">
                  <i class="fas fa-test"></i> Test API
                </button>
              </div>
            </div>

            <div class="card">
              <h3><i class="fas fa-terminal"></i> API Log</h3>
              <div class="event-log" id="eventsLog">
                <p>Ch∆∞a c√≥ activity n√†o</p>
              </div>
            </div>
          `;
          break;

        case 'servers':
          content = `
            <h1><i class="fas fa-server"></i> Active Servers</h1>
            <p>Danh s√°ch c√°c server ƒëang c√≥ s·ª± ki·ªán Blox Fruits</p>
            
            <div class="card">
              <h3><i class="fas fa-list"></i> Server List</h3>
              <div class="server-list" id="serversList">
                <div class="server-item">
                  <div class="server-info">
                    <div class="server-job">üîÑ ƒêang ch·ªù d·ªØ li·ªáu...</div>
                    <div>
                      <span class="server-players">Ch·∫°y script Roblox ƒë·ªÉ th·∫•y servers th·∫≠t</span>
                    </div>
                  </div>
                </div>
              </div>
              <div style="display: flex; gap: 10px; margin-top: 15px;">
                <button onclick="loadServers()" class="btn btn-primary">
                  <i class="fas fa-sync-alt"></i> Refresh Servers
                </button>
              </div>
            </div>

            <div class="card">
              <h3><i class="fas fa-info-circle"></i> H∆∞·ªõng d·∫´n</h3>
              <p>‚Ä¢ Click "Copy" ƒë·ªÉ copy Job ID c·ªßa server</p>
              <p>‚Ä¢ S·ª≠ d·ª•ng Job ID ƒë·ªÉ join server th√¥ng qua script</p>
              <p>‚Ä¢ Players: Hi·ªÉn th·ªã s·ªë ng∆∞·ªùi ch∆°i hi·ªán t·∫°i trong server</p>
              <p><strong>üì¢ Hi·ªán ch·ªâ hi·ªÉn th·ªã DATA TH·∫¨T t·ª´ Roblox</strong></p>
            </div>
          `;
          break;

        // C√°c trang kh√°c gi·ªØ nguy√™n...
        case 'script':
          content = `
            <h1><i class="fas fa-code"></i> Script Auto Farm</h1>
            <p>C√¥ng c·ª• h·ªó tr·ª£ ch∆°i game Blox Fruits hi·ªáu qu·∫£</p>
            
            <div class="card">
              <h3><i class="fas fa-download"></i> T·∫£i Xu·ªëng</h3>
              <p>Script ƒëang ƒë∆∞·ª£c ph√°t tri·ªÉn v√† s·∫Ω s·ªõm c√≥ m·∫∑t t·∫°i ƒë√¢y.</p>
              <button class="btn btn-primary" style="margin-top: 15px;">
                <i class="fas fa-download"></i>
                Coming Soon
              </button>
            </div>

            <div class="card">
              <h3><i class="fas fa-shield-alt"></i> T√≠nh NƒÉng</h3>
              <ul style="margin-left: 20px; margin-top: 10px;">
                <li>Auto Farm hi·ªáu qu·∫£</li>
                <li>Auto Boss khi c√≥ s·ª± ki·ªán</li>
                <li>Th√¥ng b√°o real-time</li>
                <li>An to√†n v√† ·ªïn ƒë·ªãnh</li>
              </ul>
            </div>

            <div class="card">
              <h3><i class="fas fa-api"></i> API Integration</h3>
              <p>Script Roblox s·∫Ω g·ª≠i d·ªØ li·ªáu l√™n API endpoint:</p>
              <code>${API_BASE_URL}/events</code>
              <p style="margin-top: 10px;">Method: POST</p>
              <p><strong>‚úÖ CH·∫æ ƒê·ªò DATA TH·∫¨T</strong> - Kh√¥ng c√≥ mock data</p>
            </div>
          `;
          break;

        case 'connect':
          content = `
            <h1><i class="fas fa-users"></i> K·∫øt N·ªëi V·ªõi Ch√∫ng T√¥i</h1>
            <p>Tham gia c·ªông ƒë·ªìng ƒë·ªÉ nh·∫≠n th√¥ng b√°o s·ª± ki·ªán m·ªõi nh·∫•t</p>
            
            <div class="features-grid">
              <div class="card">
                <h3><i class="fab fa-discord"></i> Discord</h3>
                <p>Tham gia server Discord ƒë·ªÉ nh·∫≠n th√¥ng b√°o s·ª± ki·ªán tr·ª±c ti·∫øp</p>
                <button id="discordBtn" class="btn btn-discord" style="margin-top: 15px;">
                  <i class="fab fa-discord"></i>
                  Join Discord
                </button>
              </div>

              <div class="card">
                <h3><i class="fas fa-envelope"></i> H·ªó Tr·ª£</h3>
                <p>Li√™n h·ªá v·ªõi ch√∫ng t√¥i n·∫øu b·∫°n c·∫ßn h·ªó tr·ª£ k·ªπ thu·∫≠t</p>
                <button class="btn btn-primary" style="margin-top: 15px;">
                  <i class="fas fa-envelope"></i>
                  Contact Support
                </button>
              </div>
            </div>
          `;
          break;

        case 'api':
          content = `
            <h1><i class="fas fa-database"></i> API Documentation</h1>
            <p>T√≠ch h·ª£p h·ªá th·ªëng th√¥ng b√°o s·ª± ki·ªán v√†o website c·ªßa b·∫°n</p>
            
            <div class="card">
              <h3><i class="fas fa-code"></i> Base URL</h3>
              <p><code>${API_BASE_URL}</code></p>
              <p><strong>‚úÖ CH·∫æ ƒê·ªò DATA TH·∫¨T</strong> - Kh√¥ng c√≥ mock data</p>
              
              <div style="margin-top: 20px;">
                <h4><i class="fas fa-paper-plane"></i> G·ª≠i s·ª± ki·ªán</h4>
                <p><strong>Endpoint:</strong> <code>POST /events</code></p>
                <p><strong>Body:</strong></p>
                <pre style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 8px; overflow-x: auto;">
{
  "event_type": "full_moon",
  "boss_name": "Full Moon",
  "players": "10/12",
  "job_id": "server_job_id_here",
  "world": "World3",
  "time_of_day": "13:45:00",
  "timestamp": "2024-01-01T12:00:00Z"
}</pre>
              </div>

              <div style="margin-top: 20px;">
                <h4><i class="fas fa-download"></i> L·∫•y danh s√°ch s·ª± ki·ªán</h4>
                <p><strong>Endpoint:</strong> <code>GET /events</code></p>
                <p>Tr·∫£ v·ªÅ danh s√°ch t·∫•t c·∫£ s·ª± ki·ªán ƒë√£ nh·∫≠n</p>
              </div>
            </div>

            <div class="card">
              <h3><i class="fas fa-key"></i> Test API</h3>
              <p>Ki·ªÉm tra k·∫øt n·ªëi API c·ªßa b·∫°n</p>
              <button onclick="testAPI()" class="btn btn-primary">
                <i class="fas fa-test"></i> Test API Connection
              </button>
            </div>
          `;
          break;
      }

      mainContent.innerHTML = content;
      
      const discordBtn = document.getElementById("discordBtn");
      if (discordBtn) {
        discordBtn.addEventListener("click", () => {
          window.open("https://discord.gg/YSfqv7ee", "_blank");
        });
      }

      if (page === 'events' || page === 'home') {
        setTimeout(() => {
          initEventsDropdown();
        }, 100);
      }

      if (page === 'events') {
        setTimeout(() => {
          loadEvents();
          updateEventsLog();
        }, 100);
      } else if (page === 'servers') {
        setTimeout(() => {
          loadServers();
        }, 100);
      }

      overlay.classList.add('hide');
      setTimeout(() => overlay.style.display = 'none', 500);
      mainContent.classList.add('show');
      
      localStorage.setItem("currentPage", page);
      updateActiveNav(page);
      
      const url = new URL(window.location);
      url.searchParams.set('page', page);
      window.history.replaceState({}, '', url);
    }, 800);
  }

  const links = dropdownMenu.querySelectorAll('a');
  links.forEach(link => {
    link.addEventListener('click', (e) => {
      e.preventDefault();
      const page = link.getAttribute('data-page');
      showPage(page);
      dropdownMenu.classList.remove('show');
    });
  });

  logo.addEventListener('click', () => {
    showPage('home');
  });

  // T·ª± ƒë·ªông refresh data m·ªói 30 gi√¢y
  setInterval(() => {
    const currentPage = localStorage.getItem("currentPage") || "home";
    if (currentPage === 'events') {
      loadEvents();
    } else if (currentPage === 'servers') {
      loadServers();
    }
  }, 30000);

  console.log("‚úÖ Saki Hub - CH·∫æ ƒê·ªò DATA TH·∫¨T: ƒê√£ t·∫Øt ho√†n to√†n mock data");
</script>
</body>
</html>
