
<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Saki Hub - Blox Fruits Event Tracker</title>
  <link rel="icon" type="image/png" href="logo.png">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
  <style>
    /* CSS gi·ªØ nguy√™n nh∆∞ tr∆∞·ªõc */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #0c0c0c 0%, #1a1a2e 50%, #16213e 100%);
      color: #fff;
      min-height: 100vh;
      overflow-x: hidden;
    }

    /* ... (gi·ªØ nguy√™n t·∫•t c·∫£ CSS c≈©) ... */

    /* Th√™m style cho server list trong API panel */
    .api-servers-list {
      margin-top: 15px;
      max-height: 300px;
      overflow-y: auto;
    }

    .api-server-item {
      background: rgba(255, 255, 255, 0.03);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 6px;
      padding: 10px;
      margin: 5px 0;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .api-server-info {
      flex: 1;
    }

    .api-server-job {
      color: #feca57;
      font-family: 'Courier New', monospace;
      font-size: 12px;
    }

    .api-server-players {
      color: #4CAF50;
      font-size: 12px;
    }

    .no-servers-api {
      text-align: center;
      padding: 20px;
      color: #888;
      font-size: 14px;
    }

  </style>
</head>
<body>

<div id="overlay">
  <div class="spinner"></div>
</div>

<header>
  <button class="dropbtn" id="menuBtn">
    <i class="fas fa-bars"></i>
  </button>
  <div class="logo" id="logo">
    <img src="logo.png" alt="Saki Hub Logo">
    Saki Hub
  </div>
</header>

<div class="dropdown-content" id="dropdownMenu">
  <div class="sidebar-logo">
    <i class="fas fa-cube"></i>
    Saki Hub
  </div>
  <a href="#" data-page="home" class="active">
    <i class="fas fa-home"></i>
    Trang Ch·ªß
  </a>
  <a href="#" data-page="events">
    <i class="fas fa-calendar-alt"></i>
    S·ª± Ki·ªán Game
  </a>
  <a href="#" data-page="servers">
    <i class="fas fa-server"></i>
    Servers
  </a>
  <a href="#" data-page="script">
    <i class="fas fa-code"></i>
    Script
  </a>
  <a href="#" data-page="connect">
    <i class="fas fa-users"></i>
    K·∫øt N·ªëi
  </a>
  <a href="#" data-page="api">
    <i class="fas fa-database"></i>
    API Documentation
  </a>
</div>

<div class="container" id="mainContent">
  <!-- N·ªôi dung s·∫Ω ƒë∆∞·ª£c thay ƒë·ªïi b·∫±ng JavaScript -->
</div>

<footer>
  <p>&copy; 2024 Saki Hub. All rights reserved.</p>
  <p>Blox Fruits Event Tracking System</p>
</footer>

<script>
  const overlay = document.getElementById('overlay');
  const menuBtn = document.getElementById('menuBtn');
  const dropdownMenu = document.getElementById('dropdownMenu');
  const mainContent = document.getElementById('mainContent');
  const logo = document.getElementById('logo');

  // API Configuration
  const API_BASE_URL = 'https://saki-hub.vercel.app/api';
  let eventsLog = [];
  let activeServers = [];
  let allEventsData = [];

  // Database th·∫≠t - CH·ªà L∆ØU DATA TH·∫¨T
  let eventsDatabase = [];

  // Danh s√°ch s·ª± ki·ªán Blox Fruits v·ªõi API endpoints
  const eventsList = [
    { 
      name: "Full Moon", 
      world: "World 3", 
      active: false, 
      color: "#4CAF50",
      api_endpoint: "full-moon",
      description: "S·ª± ki·ªán Full Moon xu·∫•t hi·ªán khi trƒÉng tr√≤n, cho ph√©p ng∆∞·ªùi ch∆°i bi·∫øn th√†nh s√≥i v√† nh·∫≠n c√°c buff ƒë·∫∑c bi·ªát.",
      event_type: "full_moon"
    },
    { 
      name: "Near Full Moon", 
      world: "World 3", 
      active: false, 
      color: "#FF9800",
      api_endpoint: "near-full-moon",
      description: "S·ª± ki·ªán Near Full Moon xu·∫•t hi·ªán khi trƒÉng g·∫ßn tr√≤n, chu·∫©n b·ªã cho s·ª± ki·ªán Full Moon s·∫Øp t·ªõi.",
      event_type: "near_full_moon"
    },
    { 
      name: "Mystic Island", 
      world: "World 3", 
      active: false, 
      color: "#2196F3",
      api_endpoint: "mystic-island",
      description: "H√≤n ƒë·∫£o th·∫ßn b√≠ xu·∫•t hi·ªán ng·∫´u nhi√™n v·ªõi c√°c boss v√† ph·∫ßn th∆∞·ªüng ƒë·ªôc quy·ªÅn.",
      event_type: "mystic_island"
    },
    { 
      name: "Rip Indra True Form", 
      world: "World 3", 
      active: false, 
      color: "#F44336",
      api_endpoint: "rip-indra-true-form",
      description: "S·ª± ki·ªán boss Rip Indra True Form v·ªõi ƒë·ªô kh√≥ cao v√† ph·∫ßn th∆∞·ªüng gi√° tr·ªã.",
      event_type: "rip_indra"
    },
    { 
      name: "Dough King", 
      world: "World 3", 
      active: false, 
      color: "#9C27B0",
      api_endpoint: "dough-king",
      description: "Vua Dough King xu·∫•t hi·ªán v·ªõi c√°c tay sai v√† ph·∫ßn th∆∞·ªüng Dough Fruit ƒë·ªôc quy·ªÅn.",
      event_type: "dough_king"
    },
    { 
      name: "Darkbeard", 
      world: "World 2", 
      active: false, 
      color: "#607D8B",
      api_endpoint: "darkbeard",
      description: "Darkbeard - boss h·∫£i t·∫∑c v·ªõi s·ª©c m·∫°nh b√≥ng t·ªëi v√† ph·∫ßn th∆∞·ªüng Dark Fruit.",
      event_type: "darkbeard"
    },
    { 
      name: "Cursed Captain", 
      world: "World 2", 
      active: false, 
      color: "#795548",
      api_endpoint: "cursed-captain",
      description: "Thuy·ªÅn tr∆∞·ªùng b·ªã nguy·ªÅn r·ªßa v·ªõi c√°c k·ªπ nƒÉng ƒë·ªôc ƒë√°o v√† ph·∫ßn th∆∞·ªüng qu√Ω hi·∫øm.",
      event_type: "cursed_captain"
    }
  ];

  // H√†m g·ªçi API - CH·ªà NH·∫¨N DATA TH·∫¨T
  async function callAPI(endpoint, method = 'GET', data = null) {
    try {
      const options = {
        method: method,
        headers: {
          'Content-Type': 'application/json',
        }
      };

      if (data && (method === 'POST' || method === 'PUT')) {
        options.body = JSON.stringify(data);
      }

      const response = await fetch(`${API_BASE_URL}${endpoint}`, options);
      
      if (!response.ok) {
        throw new Error(`HTTP error! status: ${response.status}`);
      }
      
      const result = await response.json();
      
      addToLog(`${method} ${endpoint}`, result.success ? 'success' : 'error', result);
      
      return result;
    } catch (error) {
      console.error('API Error:', error);
      addToLog(`${method} ${endpoint}`, 'error', { error: error.message });
      return { success: false, error: error.message };
    }
  }

  // H√†m l·∫•y servers theo s·ª± ki·ªán
  async function getServersByEvent(eventType) {
    try {
      // G·ªçi API ƒë·ªÉ l·∫•y t·∫•t c·∫£ events
      const result = await callAPI('/events', 'GET');
      
      if (result.success && result.events) {
        // L·ªçc servers theo event_type
        const filteredServers = result.events.filter(event => 
          event.event_type && event.event_type.toLowerCase() === eventType.toLowerCase()
        );
        
        return {
          success: true,
          servers: filteredServers,
          count: filteredServers.length
        };
      } else {
        return {
          success: false,
          servers: [],
          count: 0,
          error: result.error || 'Kh√¥ng th·ªÉ l·∫•y d·ªØ li·ªáu t·ª´ API'
        };
      }
    } catch (error) {
      return {
        success: false,
        servers: [],
        count: 0,
        error: error.message
      };
    }
  }

  // H√†m th√™m v√†o log
  function addToLog(action, type, data) {
    const logItem = {
      id: Date.now(),
      action,
      type,
      data,
      timestamp: new Date().toLocaleString('vi-VN')
    };
    
    eventsLog.unshift(logItem);
    if (eventsLog.length > 50) eventsLog = eventsLog.slice(0, 50);
    
    if (document.getElementById('eventsLog')) {
      updateEventsLog();
    }
  }

  // H√†m c·∫≠p nh·∫≠t log UI
  function updateEventsLog() {
    const logContainer = document.getElementById('eventsLog');
    if (!logContainer) return;

    logContainer.innerHTML = eventsLog.map(item => `
      <div class="event-item ${item.type}">
        <div><strong>${item.action}</strong> - ${item.type === 'success' ? '‚úÖ' : '‚ùå'}</div>
        <div>${JSON.stringify(item.data)}</div>
        <div class="event-time">${item.timestamp}</div>
      </div>
    `).join('');
  }

  // H√†m test API
  async function testAPI() {
    const testData = {
      event_type: "test_event",
      boss_name: "Test Boss",
      players: "5/10",
      job_id: "test_" + Date.now(),
      world: "World3",
      timestamp: new Date().toISOString()
    };

    const result = await callAPI('/events', 'POST', testData);
    
    if (result.success) {
      alert('‚úÖ Test API th√†nh c√¥ng! Data ƒë√£ ƒë∆∞·ª£c l∆∞u.');
      loadEvents();
      loadServers();
    } else {
      alert('‚ùå Test API th·∫•t b·∫°i: ' + (result.error || 'Unknown error'));
    }
  }

  // H√†m load events t·ª´ API
  async function loadEvents() {
    const result = await callAPI('/events', 'GET');
    
    if (result.success && result.events) {
      allEventsData = result.events;
      const eventsContainer = document.getElementById('realTimeEvents');
      if (eventsContainer) {
        if (result.events.length === 0) {
          eventsContainer.innerHTML = `
            <div class="event-item">
              <div><strong>üîÑ ƒêang ch·ªù d·ªØ li·ªáu t·ª´ Roblox</strong></div>
              <div>Ch·∫°y script trong game ƒë·ªÉ th·∫•y events th·∫≠t</div>
            </div>
          `;
        } else {
          eventsContainer.innerHTML = result.events.map(event => `
            <div class="event-item success">
              <div><strong>${event.boss_name || event.event_type}</strong></div>
              <div>Server: ${event.job_id || 'N/A'} | Players: ${event.players || 'N/A'}</div>
              <div>World: ${event.world || 'N/A'} | Time: ${event.time_of_day || 'N/A'}</div>
              <div class="event-time">${new Date(event.received_at).toLocaleString('vi-VN')}</div>
            </div>
          `).join('');
        }
      }
    }
  }

  // H√†m load servers t·ª´ API
  async function loadServers() {
    const result = await callAPI('/events', 'GET');
    
    if (result.success && result.events) {
      const serversMap = new Map();
      
      result.events.forEach(event => {
        if (event.job_id) {
          if (!serversMap.has(event.job_id)) {
            serversMap.set(event.job_id, {
              job_id: event.job_id,
              players: event.players || 'N/A',
              last_event: event.event_type,
              timestamp: event.received_at
            });
          }
        }
      });
      
      activeServers = Array.from(serversMap.values());
      updateServersDisplay();
    }
  }

  // H√†m hi·ªÉn th·ªã servers
  function updateServersDisplay() {
    const serversContainer = document.getElementById('serversList');
    if (!serversContainer) return;

    if (activeServers.length === 0) {
      serversContainer.innerHTML = `
        <div class="server-item">
          <div class="server-info">
            <div class="server-job">üîÑ ƒêang ch·ªù d·ªØ li·ªáu...</div>
            <div>
              <span class="server-players">Ch·∫°y script Roblox ƒë·ªÉ th·∫•y servers th·∫≠t</span>
            </div>
          </div>
        </div>
      `;
    } else {
      serversContainer.innerHTML = activeServers.map(server => `
        <div class="server-item">
          <div class="server-info">
            <div class="server-job">Job: ${server.job_id}..</div>
            <div>
              <span class="server-players">Players: ${server.players}</span>
              <span class="server-wait"> | Event: ${server.last_event}</span>
            </div>
          </div>
          <div class="server-actions">
            <button class="copy-btn" onclick="copyJobId('${server.job_id}')">
              <i class="fas fa-copy"></i> Copy
            </button>
          </div>
        </div>
      `).join('');
    }
  }

  // H√†m copy Job ID
  function copyJobId(jobId) {
    navigator.clipboard.writeText(jobId).then(() => {
      alert(`ƒê√£ copy Job ID: ${jobId}`);
    }).catch(err => {
      console.error('L·ªói copy: ', err);
    });
  }

  // H√†m copy API URL
  function copyApiUrl(url) {
    navigator.clipboard.writeText(url).then(() => {
      alert(`‚úÖ ƒê√£ copy API URL: ${url}`);
    }).catch(err => {
      console.error('L·ªói copy: ', err);
    });
  }

  // H√†m t·∫°o dropdown s·ª± ki·ªán
  function createEventsDropdown() {
    return `
      <div class="custom-dropdown" id="eventsDropdown">
        <div class="dropdown-header" id="dropdownHeader">
          <div>
            <strong><i class="fas fa-calendar-alt"></i> T·∫•t C·∫£ S·ª± Ki·ªán Blox Fruits</strong>
            <div class="event-world">Ch·ªçn m·ªôt s·ª± ki·ªán ƒë·ªÉ xem API endpoint v√† server list</div>
          </div>
          <i class="fas fa-chevron-down" id="dropdownArrow"></i>
        </div>
        <div class="dropdown-content-events" id="dropdownEvents">
          ${eventsList.map(event => `
            <div class="event-option" data-event="${event.name}">
              <div class="event-name">
                <div class="status-indicator ${event.active ? '' : 'inactive'}"></div>
                <div>
                  <strong style="color: ${event.color}">${event.name}</strong>
                  <div class="event-world">${event.world}</div>
                </div>
              </div>
              <div>
                <span style="color: ${event.active ? '#4CAF50' : '#888'}">
                  ${event.active ? 'ƒêang ho·∫°t ƒë·ªông' : 'Ch∆∞a ph√°t hi·ªán'}
                </span>
              </div>
            </div>
          `).join('')}
        </div>
      </div>
    `;
  }

  // H√†m t·∫°o panel hi·ªÉn th·ªã API endpoint v√† server list cho s·ª± ki·ªán
  function createEventApiPanel() {
    return `
      <div class="event-api-panel" id="eventApiPanel">
        <div class="event-api-header">
          <div class="event-api-title" id="eventApiTitle">
            <i class="fas fa-code"></i> API Endpoint: <span id="selectedEventName"></span>
          </div>
          <button class="close-api" id="closeApi">
            <i class="fas fa-times"></i>
          </button>
        </div>
        
        <div class="api-url">
          <code id="apiUrlText">${API_BASE_URL}/events/</code>
          <button class="copy-api-btn" id="copyApiBtn">
            <i class="fas fa-copy"></i> Copy URL
          </button>
        </div>
        
        <div class="api-description">
          <h4><i class="fas fa-info-circle"></i> Th√¥ng tin s·ª± ki·ªán:</h4>
          <p id="eventDescription">Ch·ªçn m·ªôt s·ª± ki·ªán ƒë·ªÉ xem m√¥ t·∫£ chi ti·∫øt.</p>
          
          <div style="margin-top: 15px;">
            <h4><i class="fas fa-server"></i> Servers ƒëang c√≥ s·ª± ki·ªán n√†y:</h4>
            <div class="api-servers-list" id="apiServersList">
              <div class="no-servers-api">
                <i class="fas fa-info-circle"></i>
                <p>Ch·ªçn m·ªôt s·ª± ki·ªán ƒë·ªÉ xem server list</p>
              </div>
            </div>
          </div>

          <div style="margin-top: 15px;">
            <h4><i class="fas fa-cogs"></i> C√°ch s·ª≠ d·ª•ng API:</h4>
            <p><span class="api-method get">GET</span> L·∫•y th√¥ng tin s·ª± ki·ªán hi·ªán t·∫°i</p>
            <p><span class="api-method post">POST</span> G·ª≠i d·ªØ li·ªáu s·ª± ki·ªán m·ªõi</p>
            
            <div style="margin-top: 10px; padding: 10px; background: rgba(255,255,255,0.05); border-radius: 5px;">
              <strong>V√≠ d·ª• GET request:</strong>
              <pre style="margin: 5px 0; color: #feca57;">fetch('${API_BASE_URL}/events')
  .then(response => response.json())
  .then(data => {
    // L·ªçc s·ª± ki·ªán full_moon
    const fullMoonEvents = data.events.filter(event => 
      event.event_type === 'full_moon'
    );
    console.log(fullMoonEvents);
  });</pre>
            </div>
          </div>
        </div>
      </div>
    `;
  }

  // H√†m hi·ªÉn th·ªã API endpoint v√† server list cho s·ª± ki·ªán ƒë∆∞·ª£c ch·ªçn
  async function showEventApi(eventName) {
    const panel = document.getElementById('eventApiPanel');
    const title = document.getElementById('selectedEventName');
    const apiUrl = document.getElementById('apiUrlText');
    const description = document.getElementById('eventDescription');
    const serversList = document.getElementById('apiServersList');
    
    if (panel && title && apiUrl && description && serversList) {
      // T√¨m th√¥ng tin s·ª± ki·ªán
      const eventInfo = eventsList.find(event => event.name === eventName);
      
      if (eventInfo) {
        // C·∫≠p nh·∫≠t ti√™u ƒë·ªÅ
        title.textContent = eventName;
        
        // C·∫≠p nh·∫≠t API URL
        const fullApiUrl = `${API_BASE_URL}/events`;
        apiUrl.textContent = fullApiUrl;
        
        // C·∫≠p nh·∫≠t m√¥ t·∫£
        description.textContent = eventInfo.description;
        
        // C·∫≠p nh·∫≠t s·ª± ki·ªán click cho n√∫t copy
        const copyBtn = document.getElementById('copyApiBtn');
        if (copyBtn) {
          copyBtn.onclick = () => copyApiUrl(fullApiUrl);
        }
        
        // Hi·ªÉn th·ªã loading
        serversList.innerHTML = `
          <div class="no-servers-api">
            <i class="fas fa-spinner fa-spin"></i>
            <p>ƒêang t·∫£i server list...</p>
          </div>
        `;
        
        // Load servers cho s·ª± ki·ªán n√†y
        const result = await getServersByEvent(eventInfo.event_type);
        
        if (result.success && result.servers.length > 0) {
          serversList.innerHTML = result.servers.map(server => `
            <div class="api-server-item">
              <div class="api-server-info">
                <div class="api-server-job">Job: ${server.job_id || 'N/A'}</div>
                <div class="api-server-players">Players: ${server.players || 'N/A'} | World: ${server.world || 'N/A'}</div>
              </div>
              <div class="server-actions">
                <button class="copy-btn" onclick="copyJobId('${server.job_id}')">
                  <i class="fas fa-copy"></i> Copy
                </button>
              </div>
            </div>
          `).join('');
        } else {
          serversList.innerHTML = `
            <div class="no-servers-api">
              <i class="fas fa-info-circle"></i>
              <p>Kh√¥ng c√≥ server n√†o ƒëang c√≥ s·ª± ki·ªán "${eventName}"</p>
              <p style="font-size: 12px; margin-top: 5px;">${result.error || 'Ch·∫°y script trong game ƒë·ªÉ th·∫•y servers th·∫≠t'}</p>
            </div>
          `;
        }
        
        // Hi·ªÉn th·ªã panel
        panel.classList.add('show');
      }
    }
  }

  // H√†m kh·ªüi t·∫°o dropdown s·ª± ki·ªán
  function initEventsDropdown() {
    const dropdownHeader = document.getElementById('dropdownHeader');
    const dropdownEvents = document.getElementById('dropdownEvents');
    const dropdownArrow = document.getElementById('dropdownArrow');
    
    if (dropdownHeader && dropdownEvents) {
      dropdownHeader.addEventListener('click', () => {
        dropdownEvents.classList.toggle('show');
        dropdownHeader.classList.toggle('active');
        dropdownArrow.classList.toggle('fa-chevron-down');
        dropdownArrow.classList.toggle('fa-chevron-up');
      });
      
      // ƒê√≥ng dropdown khi click ra ngo√†i
      document.addEventListener('click', (e) => {
        if (!e.target.closest('.custom-dropdown')) {
          dropdownEvents.classList.remove('show');
          dropdownHeader.classList.remove('active');
          dropdownArrow.classList.add('fa-chevron-down');
          dropdownArrow.classList.remove('fa-chevron-up');
        }
      });
      
      // X·ª≠ l√Ω ch·ªçn s·ª± ki·ªán
      const eventOptions = document.querySelectorAll('.event-option');
      eventOptions.forEach(option => {
        option.addEventListener('click', () => {
          const eventName = option.getAttribute('data-event');
          
          // ƒê√≥ng dropdown
          dropdownEvents.classList.remove('show');
          dropdownHeader.classList.remove('active');
          dropdownArrow.classList.add('fa-chevron-down');
          dropdownArrow.classList.remove('fa-chevron-up');
          
          // Hi·ªÉn th·ªã API endpoint v√† server list cho s·ª± ki·ªán ƒë∆∞·ª£c ch·ªçn
          showEventApi(eventName);
        });
      });
    }
    
    // X·ª≠ l√Ω ƒë√≥ng panel API
    const closeApi = document.getElementById('closeApi');
    if (closeApi) {
      closeApi.addEventListener('click', () => {
        const panel = document.getElementById('eventApiPanel');
        if (panel) {
          panel.classList.remove('show');
        }
      });
    }
  }

  window.addEventListener('load', () => {
    setTimeout(() => {
      overlay.classList.add('hide');
      setTimeout(() => overlay.style.display = 'none', 500);
      mainContent.classList.add('show');
      
      const page = new URLSearchParams(window.location.search).get("page") || 
                   localStorage.getItem("currentPage") || "home";
      showPage(page);
      updateActiveNav(page);
    }, 1000);
  });

  menuBtn.addEventListener('click', () => {
    dropdownMenu.classList.toggle('show');
  });

  window.addEventListener('click', (e) => {
    if (!menuBtn.contains(e.target) && !dropdownMenu.contains(e.target)) {
      dropdownMenu.classList.remove('show');
    }
  });

  function updateActiveNav(page) {
    const links = dropdownMenu.querySelectorAll('a');
    links.forEach(link => {
      link.classList.remove('active');
      if (link.getAttribute('data-page') === page) {
        link.classList.add('active');
      }
    });
  }

  function showPage(page) {
    overlay.style.display = 'flex';
    overlay.classList.remove('hide');
    mainContent.classList.remove('show');

    setTimeout(() => {
      let content = '';
      
      switch(page) {
        case 'home':
          content = `
            <h1><i class="fas fa-home"></i> Ch√†o M·ª´ng ƒê·∫øn Saki Hub</h1>
            <p>H·ªá th·ªëng theo d√µi s·ª± ki·ªán Blox Fruits t·ª± ƒë·ªông v√† th·ªùi gian th·ª±c</p>
            
            <div class="card">
              <h3><i class="fas fa-star"></i> Gi·ªõi Thi·ªáu</h3>
              <p>Saki Hub cung c·∫•p gi·∫£i ph√°p theo d√µi s·ª± ki·ªán trong game Blox Fruits m·ªôt c√°ch t·ª± ƒë·ªông. H·ªá th·ªëng s·∫Ω th√¥ng b√°o ngay l·∫≠p t·ª©c khi c√≥ s·ª± ki·ªán m·ªõi xu·∫•t hi·ªán.</p>
            </div>

            <div class="card">
              <h3><i class="fas fa-calendar-alt"></i> T·∫•t C·∫£ S·ª± Ki·ªán</h3>
              <p>Ch·ªçn m·ªôt s·ª± ki·ªán ƒë·ªÉ xem API endpoint v√† server list t∆∞∆°ng ·ª©ng:</p>
              ${createEventsDropdown()}
              ${createEventApiPanel()}
              <p style="margin-top: 15px; font-size: 14px; color: #aaa;">
                <i class="fas fa-info-circle"></i> M·ªói s·ª± ki·ªán c√≥ API endpoint ri√™ng ƒë·ªÉ l·∫•y d·ªØ li·ªáu th·ªùi gian th·ª±c
              </p>
            </div>

            <div class="card">
              <h3><i class="fas fa-plug"></i> Tr·∫°ng th√°i h·ªá th·ªëng</h3>
              <p>API Base URL: <code>${API_BASE_URL}</code></p>
              <p><strong>‚úÖ CH·∫æ ƒê·ªò DATA TH·∫¨T</strong> - Ch·ªâ hi·ªÉn th·ªã d·ªØ li·ªáu t·ª´ Roblox</p>
              <div style="display: flex; gap: 10px; margin-top: 15px;">
                <button onclick="testAPI()" class="btn btn-primary">
                  <i class="fas fa-test"></i> Test API
                </button>
              </div>
            </div>
          `;
          break;

        case 'events':
          content = `
            <h1><i class="fas fa-calendar-alt"></i> S·ª± Ki·ªán Blox Fruits - REAL TIME</h1>
            <p>Theo d√µi t·∫•t c·∫£ s·ª± ki·ªán trong game theo th·ªùi gian th·ª±c</p>
            
            <div class="card">
              <h3><i class="fas fa-list"></i> Danh S√°ch S·ª± Ki·ªán</h3>
              <p>Ch·ªçn m·ªôt s·ª± ki·ªán ƒë·ªÉ xem API endpoint v√† server list:</p>
              ${createEventsDropdown()}
              ${createEventApiPanel()}
            </div>
            
            <div class="card">
              <h3><i class="fas fa-database"></i> Events t·ª´ Roblox</h3>
              <div class="event-log" id="realTimeEvents">
                <div class="event-item">
                  <div><strong>üîÑ ƒêang ch·ªù d·ªØ li·ªáu...</strong></div>
                  <div>Ch·∫°y script trong game Blox Fruits ƒë·ªÉ th·∫•y events th·∫≠t</div>
                </div>
              </div>
              <div style="display: flex; gap: 10px; margin-top: 15px;">
                <button onclick="loadEvents()" class="btn btn-primary">
                  <i class="fas fa-sync-alt"></i> Refresh Events
                </button>
                <button onclick="testAPI()" class="btn" style="background: #666;">
                  <i class="fas fa-test"></i> Test API
                </button>
              </div>
            </div>

            <div class="card">
              <h3><i class="fas fa-terminal"></i> API Log</h3>
              <div class="event-log" id="eventsLog">
                <p>Ch∆∞a c√≥ activity n√†o</p>
              </div>
            </div>
          `;
          break;

        // ... (c√°c trang kh√°c gi·ªØ nguy√™n) ...
      }

      mainContent.innerHTML = content;
      
      const discordBtn = document.getElementById("discordBtn");
      if (discordBtn) {
        discordBtn.addEventListener("click", () => {
          window.open("https://discord.gg/YSfqv7ee", "_blank");
        });
      }

      if (page === 'events' || page === 'home') {
        setTimeout(() => {
          initEventsDropdown();
        }, 100);
      }

      if (page === 'events') {
        setTimeout(() => {
          loadEvents();
          updateEventsLog();
        }, 100);
      } else if (page === 'servers') {
        setTimeout(() => {
          loadServers();
        }, 100);
      }

      overlay.classList.add('hide');
      setTimeout(() => overlay.style.display = 'none', 500);
      mainContent.classList.add('show');
      
      localStorage.setItem("currentPage", page);
      updateActiveNav(page);
      
      const url = new URL(window.location);
      url.searchParams.set('page', page);
      window.history.replaceState({}, '', url);
    }, 800);
  }

  const links = dropdownMenu.querySelectorAll('a');
  links.forEach(link => {
    link.addEventListener('click', (e) => {
      e.preventDefault();
      const page = link.getAttribute('data-page');
      showPage(page);
      dropdownMenu.classList.remove('show');
    });
  });

  logo.addEventListener('click', () => {
    showPage('home');
  });

  // T·ª± ƒë·ªông refresh data m·ªói 30 gi√¢y
  setInterval(() => {
    const currentPage = localStorage.getItem("currentPage") || "home";
    if (currentPage === 'events') {
      loadEvents();
    } else if (currentPage === 'servers') {
      loadServers();
    }
  }, 30000);

  console.log("‚úÖ Saki Hub - CH·∫æ ƒê·ªò DATA TH·∫¨T: ƒê√£ t·∫Øt ho√†n to√†n mock data");
</script>
</body>
</html>
