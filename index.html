<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Saki Hub - Blox Fruits Event Tracker</title>
  <link rel="icon" type="image/png" href="logo.png">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
  <style>
    :root {
      --primary-color: #feca57;
      --secondary-color: #ff6b6b;
      --dark-bg: #0c0c0c;
      --medium-bg: #1a1a2e;
      --light-bg: #16213e;
      --card-bg: rgba(255, 255, 255, 0.05);
      --border-color: rgba(255, 255, 255, 0.1);
      --success-color: #4CAF50;
      --error-color: #f44336;
      --text-color: #fff;
      --text-muted: #888;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, var(--dark-bg) 0%, var(--medium-bg) 50%, var(--light-bg) 100%);
      color: var(--text-color);
      min-height: 100vh;
      overflow-x: hidden;
      line-height: 1.6;
    }

    /* Header */
    header {
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 15px 0;
      background: rgba(0, 0, 0, 0.9);
      backdrop-filter: blur(10px);
      position: sticky;
      top: 0;
      z-index: 1000;
      border-bottom: 1px solid var(--border-color);
    }

    .logo {
      font-size: 24px;
      font-weight: bold;
      cursor: pointer;
      color: var(--text-color);
      padding: 8px 16px;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 12px;
      background: linear-gradient(45deg, var(--secondary-color), var(--primary-color));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .logo img {
      height: 32px;
      border-radius: 8px;
    }

    .logo:hover {
      transform: scale(1.05);
    }

    /* Menu Button */
    .dropbtn {
      position: absolute;
      left: 20px;
      top: 50%;
      transform: translateY(-50%);
      background: rgba(255, 255, 255, 0.1);
      color: var(--text-color);
      padding: 12px 16px;
      font-size: 20px;
      border: none;
      cursor: pointer;
      border-radius: 8px;
      transition: all 0.3s ease;
      backdrop-filter: blur(10px);
    }

    .dropbtn:hover {
      background: rgba(255, 255, 255, 0.2);
      transform: translateY(-50%) scale(1.1);
    }

    /* Sidebar */
    .dropdown-content {
      height: 100vh;
      width: 280px;
      position: fixed;
      top: 0;
      left: -280px;
      background: rgba(0, 0, 0, 0.95);
      backdrop-filter: blur(20px);
      overflow-x: hidden;
      transition: left 0.4s ease, opacity 0.4s ease;
      z-index: 2000;
      padding-top: 0;
      opacity: 0;
      border-right: 1px solid var(--border-color);
    }

    .dropdown-content.show {
      left: 0;
      opacity: 1;
    }

    .sidebar-logo {
      color: var(--text-color);
      font-size: 22px;
      margin: 0;
      padding: 25px 20px;
      text-align: left;
      background: linear-gradient(45deg, var(--secondary-color), var(--primary-color));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      font-weight: bold;
      border-bottom: 1px solid var(--border-color);
    }

    .dropdown-content a {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 18px 25px;
      color: var(--text-color);
      text-decoration: none;
      transition: all 0.3s ease;
      border-left: 4px solid transparent;
    }

    .dropdown-content a i {
      width: 20px;
      text-align: center;
    }

    .dropdown-content a:hover {
      background: rgba(255, 255, 255, 0.1);
      border-left: 4px solid var(--primary-color);
      padding-left: 30px;
    }

    .dropdown-content a.active {
      background: rgba(254, 202, 87, 0.1);
      border-left: 4px solid var(--primary-color);
    }

    /* Main Content */
    .container {
      max-width: 1200px;
      margin: 40px auto;
      padding: 30px;
      background: var(--card-bg);
      backdrop-filter: blur(10px);
      border-radius: 20px;
      border: 1px solid var(--border-color);
      opacity: 1;
      transform: translateY(0);
      transition: all 0.5s ease;
    }

    .container.hidden {
      opacity: 0;
      transform: translateY(20px);
    }

    /* Overlay */
    #overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, var(--dark-bg) 0%, var(--medium-bg) 100%);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 3000;
      transition: opacity 0.5s ease;
    }

    #overlay.hide {
      opacity: 0;
      pointer-events: none;
    }

    .loading-text {
      margin-top: 20px;
      font-size: 18px;
      color: var(--primary-color);
    }

    .spinner {
      border: 4px solid rgba(255, 255, 255, 0.1);
      border-top: 4px solid var(--primary-color);
      border-radius: 50%;
      width: 60px;
      height: 60px;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    /* Buttons */
    .btn {
      padding: 12px 24px;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      cursor: pointer;
      transition: all 0.3s ease;
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      font-weight: 600;
    }

    .btn-primary {
      background: linear-gradient(45deg, var(--secondary-color), var(--primary-color));
      color: #000;
    }

    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(254, 202, 87, 0.3);
    }

    .btn-discord {
      background: #5865F2;
      color: white;
    }

    .btn-discord:hover {
      background: #4752c4;
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(88, 101, 242, 0.3);
    }

    /* Cards */
    .card {
      background: var(--card-bg);
      border-radius: 12px;
      padding: 24px;
      margin: 20px 0;
      border: 1px solid var(--border-color);
      transition: all 0.3s ease;
    }

    .card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
    }

    .card h3 {
      color: var(--primary-color);
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    /* Features Grid */
    .features-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      margin: 30px 0;
    }

    /* Event Status */
    .event-status {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 10px;
      background: rgba(255, 255, 255, 0.05);
      border-radius: 8px;
      margin: 10px 0;
    }

    .status-indicator {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background: var(--success-color);
    }

    .status-indicator.inactive {
      background: var(--error-color);
    }

    /* Event Log */
    .event-log {
      max-height: 400px;
      overflow-y: auto;
      margin: 15px 0;
    }

    .event-item {
      background: rgba(255, 255, 255, 0.03);
      border-left: 4px solid var(--primary-color);
      padding: 12px 15px;
      margin: 8px 0;
      border-radius: 0 8px 8px 0;
    }

    .event-item.success {
      border-left-color: var(--success-color);
    }

    .event-item.error {
      border-left-color: var(--error-color);
    }

    .event-time {
      font-size: 12px;
      color: var(--text-muted);
      margin-top: 5px;
    }

    /* Server List */
    .server-list {
      display: flex;
      flex-direction: column;
      gap: 10px;
      margin: 15px 0;
    }

    .server-item {
      background: rgba(255, 255, 255, 0.03);
      border: 1px solid var(--border-color);
      border-radius: 8px;
      padding: 15px;
      font-family: 'Courier New', monospace;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .server-info {
      display: flex;
      flex-direction: column;
      gap: 5px;
    }

    .server-job {
      color: var(--primary-color);
      font-weight: bold;
    }

    .server-players {
      color: var(--success-color);
    }

    .server-wait {
      color: var(--secondary-color);
    }

    .server-actions {
      display: flex;
      gap: 10px;
    }

    .copy-btn {
      background: rgba(255, 255, 255, 0.1);
      color: white;
      border: none;
      padding: 5px 10px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 12px;
      transition: all 0.3s ease;
    }

    .copy-btn:hover {
      background: rgba(255, 255, 255, 0.2);
    }

    /* Event Servers */
    .event-servers {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }

    .event-server-card {
      background: rgba(255, 255, 255, 0.03);
      border-radius: 10px;
      padding: 15px;
      border: 1px solid var(--border-color);
      transition: all 0.3s ease;
    }

    .event-server-card:hover {
      transform: translateY(-3px);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    .event-server-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
      padding-bottom: 10px;
      border-bottom: 1px solid var(--border-color);
    }

    .event-server-title {
      display: flex;
      align-items: center;
      gap: 8px;
      font-weight: bold;
      color: var(--primary-color);
    }

    .event-server-count {
      background: rgba(255, 255, 255, 0.1);
      padding: 2px 8px;
      border-radius: 10px;
      font-size: 12px;
    }

    .event-server-list {
      display: flex;
      flex-direction: column;
      gap: 8px;
      max-height: 200px;
      overflow-y: auto;
    }

    .event-server-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 8px 10px;
      background: rgba(0, 0, 0, 0.2);
      border-radius: 6px;
      font-size: 14px;
    }

    .event-server-info {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .event-server-job {
      color: var(--primary-color);
      font-weight: bold;
    }

    .event-server-players {
      color: var(--success-color);
      font-size: 12px;
    }

    /* Footer */
    footer {
      text-align: center;
      padding: 30px;
      margin-top: 50px;
      border-top: 1px solid var(--border-color);
      background: rgba(0, 0, 0, 0.8);
    }

    /* Page Sections */
    .page-section {
      display: none;
    }

    .page-section.active {
      display: block;
    }

    /* Responsive */
    @media (max-width: 768px) {
      .container {
        margin: 20px;
        padding: 20px;
      }
      
      .features-grid {
        grid-template-columns: 1fr;
      }
      
      .dropdown-content {
        width: 250px;
        left: -250px;
      }
      
      .server-item {
        flex-direction: column;
        align-items: flex-start;
        gap: 10px;
      }
      
      .server-actions {
        align-self: flex-end;
      }
      
      .event-servers {
        grid-template-columns: 1fr;
      }
    }

    /* No JavaScript Warning */
    .no-js-warning {
      background: var(--error-color);
      color: white;
      padding: 15px;
      text-align: center;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      z-index: 9999;
    }
  </style>
</head>
<body>

<div id="overlay">
  <div class="spinner"></div>
  <div class="loading-text">ƒêang t·∫£i Saki Hub...</div>
</div>

<noscript>
  <div class="no-js-warning">
    <p>‚ö†Ô∏è Trang web n√†y y√™u c·∫ßu JavaScript ƒë·ªÉ ho·∫°t ƒë·ªông. Vui l√≤ng b·∫≠t JavaScript trong tr√¨nh duy·ªát c·ªßa b·∫°n.</p>
  </div>
</noscript>

<header>
  <button class="dropbtn" id="menuBtn">
    <i class="fas fa-bars"></i>
  </button>
  <div class="logo" id="logo">
    <img src="logo.png" alt="Saki Hub Logo">
    Saki Hub
  </div>
</header>

<div class="dropdown-content" id="dropdownMenu">
  <div class="sidebar-logo">
    <i class="fas fa-cube"></i>
    Saki Hub
  </div>
  <a href="#" data-page="home" class="active">
    <i class="fas fa-home"></i>
    Trang Ch·ªß
  </a>
  <a href="#" data-page="events">
    <i class="fas fa-calendar-alt"></i>
    S·ª± Ki·ªán Game
  </a>
  <a href="#" data-page="servers">
    <i class="fas fa-server"></i>
    Servers
  </a>
  <a href="#" data-page="script">
    <i class="fas fa-code"></i>
    Script
  </a>
  <a href="#" data-page="connect">
    <i class="fas fa-users"></i>
    K·∫øt N·ªëi
  </a>
  <a href="#" data-page="api">
    <i class="fas fa-database"></i>
    API Documentation
  </a>
</div>

<div class="container" id="mainContent">
  <!-- N·ªôi dung trang ch·ªß m·∫∑c ƒë·ªãnh -->
  <div id="home" class="page-section active">
    <h1><i class="fas fa-home"></i> Ch√†o M·ª´ng ƒê·∫øn Saki Hub</h1>
    <p>H·ªá th·ªëng theo d√µi s·ª± ki·ªán Blox Fruits t·ª± ƒë·ªông v√† th·ªùi gian th·ª±c</p>
    
    <div class="card">
      <h3><i class="fas fa-star"></i> Gi·ªõi Thi·ªáu</h3>
      <p>Saki Hub cung c·∫•p gi·∫£i ph√°p theo d√µi s·ª± ki·ªán trong game Blox Fruits m·ªôt c√°ch t·ª± ƒë·ªông. H·ªá th·ªëng s·∫Ω th√¥ng b√°o ngay l·∫≠p t·ª©c khi c√≥ s·ª± ki·ªán m·ªõi xu·∫•t hi·ªán.</p>
    </div>

    <div class="features-grid">
      <div class="card">
        <h3><i class="fas fa-bolt"></i> Theo D√µi Th·ªùi Gian Th·ª±c</h3>
        <p>Nh·∫≠n th√¥ng b√°o ngay l·∫≠p t·ª©c khi s·ª± ki·ªán xu·∫•t hi·ªán trong game</p>
      </div>
      <div class="card">
        <h3><i class="fas fa-robot"></i> T·ª± ƒê·ªông Ho√†n To√†n</h3>
        <p>Kh√¥ng c·∫ßn can thi·ªáp th·ªß c√¥ng, h·ªá th·ªëng t·ª± ƒë·ªông ph√°t hi·ªán s·ª± ki·ªán</p>
      </div>
      <div class="card">
        <h3><i class="fas fa-globe"></i> ƒêa N·ªÅn T·∫£ng</h3>
        <p>Ho·∫°t ƒë·ªông tr√™n c·∫£ Discord v√† website c·ªßa b·∫°n</p>
      </div>
    </div>

    <div class="card">
      <h3><i class="fas fa-chart-line"></i> Tr·∫°ng Th√°i S·ª± Ki·ªán</h3>
      <div style="text-align: center; padding: 20px;">
        <i class="fas fa-sync-alt" style="font-size: 48px; color: #feca57; margin-bottom: 15px;"></i>
        <p><strong>ƒêang ch·ªù d·ªØ li·ªáu t·ª´ Roblox</strong></p>
        <p>Ch·∫°y script trong game ƒë·ªÉ th·∫•y tr·∫°ng th√°i th·ª±c t·∫ø</p>
      </div>
    </div>

    <div class="card">
      <h3><i class="fas fa-plug"></i> Tr·∫°ng th√°i h·ªá th·ªëng</h3>
      <p>API Base URL: <code id="api-url">https://saki-hub.vercel.app/api</code></p>
      <p><strong>‚úÖ CH·∫æ ƒê·ªò DATA TH·∫¨T</strong> - Ch·ªâ hi·ªÉn th·ªã d·ªØ li·ªáu t·ª´ Roblox</p>
      <div style="display: flex; gap: 10px; margin-top: 15px;">
        <button onclick="testAPI()" class="btn btn-primary">
          <i class="fas fa-test"></i> Test API
        </button>
      </div>
    </div>
  </div>

  <!-- Trang s·ª± ki·ªán -->
  <div id="events" class="page-section">
    <h1><i class="fas fa-calendar-alt"></i> S·ª± Ki·ªán Blox Fruits - REAL TIME</h1>
    <p>Theo d√µi t·∫•t c·∫£ s·ª± ki·ªán trong game theo th·ªùi gian th·ª±c</p>
    
    <div class="card">
      <h3><i class="fas fa-database"></i> Events t·ª´ Roblox</h3>
      <div class="event-log" id="realTimeEvents">
        <div class="event-item">
          <div><strong>üîÑ ƒêang ch·ªù d·ªØ li·ªáu...</strong></div>
          <div>Ch·∫°y script trong game Blox Fruits ƒë·ªÉ th·∫•y events th·∫≠t</div>
        </div>
      </div>
      <div style="display: flex; gap: 10px; margin-top: 15px;">
        <button onclick="loadEvents()" class="btn btn-primary">
          <i class="fas fa-sync-alt"></i> Refresh Events
        </button>
        <button onclick="testAPI()" class="btn" style="background: #666;">
          <i class="fas fa-test"></i> Test API
        </button>
      </div>
    </div>

    <div class="card">
      <h3><i class="fas fa-terminal"></i> API Log</h3>
      <div class="event-log" id="eventsLog">
        <p>Ch∆∞a c√≥ activity n√†o</p>
      </div>
    </div>
    
    <div class="features-grid" id="eventsGrid">
      <!-- Events s·∫Ω ƒë∆∞·ª£c th√™m v√†o ƒë√¢y b·∫±ng JavaScript -->
    </div>
  </div>
  
  <!-- Trang servers -->
  <div id="servers" class="page-section">
    <h1><i class="fas fa-server"></i> Active Servers</h1>
    <p>Danh s√°ch c√°c server ƒëang c√≥ s·ª± ki·ªán Blox Fruits</p>
    
    <div class="card">
      <h3><i class="fas fa-list"></i> Server List</h3>
      <div class="server-list" id="serversList">
        <div class="server-item">
          <div class="server-info">
            <div class="server-job">üîÑ ƒêang ch·ªù d·ªØ li·ªáu...</div>
            <div>
              <span class="server-players">Ch·∫°y script Roblox ƒë·ªÉ th·∫•y servers th·∫≠t</span>
            </div>
          </div>
        </div>
      </div>
      <div style="display: flex; gap: 10px; margin-top: 15px;">
        <button onclick="loadServers()" class="btn btn-primary">
          <i class="fas fa-sync-alt"></i> Refresh Servers
        </button>
      </div>
    </div>

    <div class="card">
      <h3><i class="fas fa-info-circle"></i> H∆∞·ªõng d·∫´n</h3>
      <p>‚Ä¢ Click "Copy" ƒë·ªÉ copy Job ID c·ªßa server</p>
      <p>‚Ä¢ S·ª≠ d·ª•ng Job ID ƒë·ªÉ join server th√¥ng qua script</p>
      <p>‚Ä¢ Players: Hi·ªÉn th·ªã s·ªë ng∆∞·ªùi ch∆°i hi·ªán t·∫°i trong server</p>
      <p><strong>üì¢ Hi·ªán ch·ªâ hi·ªÉn th·ªã DATA TH·∫¨T t·ª´ Roblox</strong></p>
    </div>
  </div>
  
  <!-- C√°c trang kh√°c -->
  <div id="script" class="page-section">
    <!-- N·ªôi dung trang script -->
  </div>
  
  <div id="connect" class="page-section">
    <!-- N·ªôi dung trang k·∫øt n·ªëi -->
  </div>
  
  <div id="api" class="page-section">
    <!-- N·ªôi dung trang API -->
  </div>
</div>

<footer>
  <p>&copy; 2024 Saki Hub. All rights reserved.</p>
  <p>Blox Fruits Event Tracking System</p>
</footer>

<script>
  // Kh·ªüi t·∫°o bi·∫øn v√† h√†m to√†n c·ª•c
  const overlay = document.getElementById('overlay');
  const menuBtn = document.getElementById('menuBtn');
  const dropdownMenu = document.getElementById('dropdownMenu');
  const mainContent = document.getElementById('mainContent');
  const logo = document.getElementById('logo');
  const pageSections = document.querySelectorAll('.page-section');

  // API Configuration
  const API_BASE_URL = 'https://saki-hub.vercel.app/api';
  let eventsLog = [];
  let activeServers = [];
  let eventsDatabase = [];

  // Danh s√°ch s·ª± ki·ªán Blox Fruits (ch·ªâ m√¥ t·∫£)
  const eventsList = [
    { name: "Full Moon", world: "World 3", active: false, color: "#4CAF50", icon: "fas fa-moon" },
    { name: "Near Full Moon", world: "World 3", active: false, color: "#FF9800", icon: "fas fa-moon" },
    { name: "Mystic Island", world: "World 3", active: false, color: "#2196F3", icon: "fas fa-mountain" },
    { name: "Rip Indra True Form", world: "World 3", active: false, color: "#F44336", icon: "fas fa-skull" },
    { name: "Dough King", world: "World 3", active: false, color: "#9C27B0", icon: "fas fa-crown" },
    { name: "Darkbeard", world: "World 2", active: false, color: "#607D8B", icon: "fas fa-skull-crossbones" },
    { name: "Cursed Captain", world: "World 2", active: false, color: "#795548", icon: "fas fa-ghost" }
  ];

  // C·∫≠p nh·∫≠t URL API trong giao di·ªán
  document.getElementById('api-url').textContent = API_BASE_URL;

  // H√†m kh·ªüi t·∫°o
  function init() {
    // ·∫®n overlay sau khi trang ƒë√£ t·∫£i
    setTimeout(() => {
      overlay.classList.add('hide');
      setTimeout(() => overlay.style.display = 'none', 500);
    }, 1500);

    // Thi·∫øt l·∫≠p s·ª± ki·ªán cho menu
    setupMenuEvents();
    
    // Thi·∫øt l·∫≠p s·ª± ki·ªán cho chuy·ªÉn trang
    setupPageNavigation();
    
    // T·∫£i d·ªØ li·ªáu ban ƒë·∫ßu
    loadInitialData();
    
    // T·∫°o danh s√°ch s·ª± ki·ªán
    createEventsGrid();
  }

  // T·∫°o grid s·ª± ki·ªán
  function createEventsGrid() {
    const eventsGrid = document.getElementById('eventsGrid');
    if (!eventsGrid) return;
    
    eventsGrid.innerHTML = eventsList.map(event => `
      <div class="card">
        <h3 style="color: ${event.color}">
          <i class="${event.icon}"></i>
          ${event.name}
        </h3>
        <p><strong>Th·∫ø gi·ªõi:</strong> ${event.world}</p>
        <p><strong>Tr·∫°ng th√°i:</strong> 
          <span style="color: #888">
            Ch·ªù d·ªØ li·ªáu th·ª±c t·∫ø
          </span>
        </p>
        <div class="event-status">
          <div class="status-indicator inactive"></div>
          <span>Ch∆∞a ph√°t hi·ªán</span>
        </div>
      </div>
    `).join('');
  }

  // Thi·∫øt l·∫≠p s·ª± ki·ªán cho menu
  function setupMenuEvents() {
    menuBtn.addEventListener('click', () => {
      dropdownMenu.classList.toggle('show');
    });

    window.addEventListener('click', (e) => {
      if (!menuBtn.contains(e.target) && !dropdownMenu.contains(e.target)) {
        dropdownMenu.classList.remove('show');
      }
    });
  }

  // Thi·∫øt l·∫≠p s·ª± ki·ªán cho ƒëi·ªÅu h∆∞·ªõng trang
  function setupPageNavigation() {
    const links = dropdownMenu.querySelectorAll('a');
    links.forEach(link => {
      link.addEventListener('click', (e) => {
        e.preventDefault();
        const page = link.getAttribute('data-page');
        showPage(page);
        dropdownMenu.classList.remove('show');
      });
    });

    logo.addEventListener('click', () => {
      showPage('home');
    });
  }

  // Hi·ªÉn th·ªã trang ƒë∆∞·ª£c ch·ªçn
  function showPage(page) {
    // ·∫®n t·∫•t c·∫£ c√°c trang
    pageSections.forEach(section => {
      section.classList.remove('active');
    });
    
    // Hi·ªÉn th·ªã trang ƒë∆∞·ª£c ch·ªçn
    const targetPage = document.getElementById(page);
    if (targetPage) {
      targetPage.classList.add('active');
      
      // C·∫≠p nh·∫≠t tr·∫°ng th√°i active trong menu
      updateActiveNav(page);
      
      // L∆∞u trang hi·ªán t·∫°i
      localStorage.setItem("currentPage", page);
      
      // C·∫≠p nh·∫≠t URL
      const url = new URL(window.location);
      url.searchParams.set('page', page);
      window.history.replaceState({}, '', url);
      
      // T·∫£i d·ªØ li·ªáu cho trang c·ª• th·ªÉ
      loadPageData(page);
    }
  }

  // C·∫≠p nh·∫≠t ƒëi·ªÅu h∆∞·ªõng active
  function updateActiveNav(page) {
    const links = dropdownMenu.querySelectorAll('a');
    links.forEach(link => {
      link.classList.remove('active');
      if (link.getAttribute('data-page') === page) {
        link.classList.add('active');
      }
    });
  }

  // T·∫£i d·ªØ li·ªáu ban ƒë·∫ßu
  function loadInitialData() {
    // Kh√¥i ph·ª•c trang tr∆∞·ªõc ƒë√≥ ho·∫∑c m·∫∑c ƒë·ªãnh l√† trang ch·ªß
    const savedPage = localStorage.getItem("currentPage") || "home";
    const urlPage = new URLSearchParams(window.location.search).get("page");
    const pageToShow = urlPage || savedPage;
    
    showPage(pageToShow);
  }

  // T·∫£i d·ªØ li·ªáu cho trang c·ª• th·ªÉ
  function loadPageData(page) {
    switch(page) {
      case 'events':
        loadEvents();
        break;
      case 'servers':
        loadServers();
        break;
      // C√°c trang kh√°c c√≥ th·ªÉ th√™m logic t·∫£i d·ªØ li·ªáu ·ªü ƒë√¢y
    }
  }

  // H√†m g·ªçi API
  async function callAPI(endpoint, method = 'GET', data = null) {
    try {
      const options = {
        method: method,
        headers: {
          'Content-Type': 'application/json',
        }
      };

      if (data && (method === 'POST' || method === 'PUT')) {
        options.body = JSON.stringify(data);
      }

      const response = await fetch(`${API_BASE_URL}${endpoint}`, options);
      const result = await response.json();
      
      addToLog(`${method} ${endpoint}`, result.success ? 'success' : 'error', result);
      
      return result;
    } catch (error) {
      console.error('API Error:', error);
      addToLog(`${method} ${endpoint}`, 'error', { error: error.message });
      return { success: false, error: error.message };
    }
  }

  // H√†m th√™m v√†o log
  function addToLog(action, type, data) {
    const logItem = {
      id: Date.now(),
      action,
      type,
      data,
      timestamp: new Date().toLocaleString('vi-VN')
    };
    
    eventsLog.unshift(logItem);
    if (eventsLog.length > 50) eventsLog = eventsLog.slice(0, 50);
    
    if (document.getElementById('eventsLog')) {
      updateEventsLog();
    }
  }

  // H√†m c·∫≠p nh·∫≠t log UI
  function updateEventsLog() {
    const logContainer = document.getElementById('eventsLog');
    if (!logContainer) return;

    logContainer.innerHTML = eventsLog.map(item => `
      <div class="event-item ${item.type}">
        <div><strong>${item.action}</strong> - ${item.type === 'success' ? '‚úÖ' : '‚ùå'}</div>
        <div>${JSON.stringify(item.data)}</div>
        <div class="event-time">${item.timestamp}</div>
      </div>
    `).join('');
  }

  // H√†m test API
  async function testAPI() {
    const testData = {
      event_type: "test_event",
      boss_name: "Test Boss",
      players: "5/10",
      job_id: "test_" + Date.now(),
      world: "World3",
      timestamp: new Date().toISOString()
    };

    const result = await callAPI('/events', 'POST', testData);
    
    if (result.success) {
      alert('‚úÖ Test API th√†nh c√¥ng! Data ƒë√£ ƒë∆∞·ª£c l∆∞u.');
      loadEvents();
      loadServers();
    } else {
      alert('‚ùå Test API th·∫•t b·∫°i: ' + (result.error || 'Unknown error'));
    }
  }

  // H√†m load events t·ª´ API
  async function loadEvents() {
    const result = await callAPI('/events', 'GET');
    
    if (result.success && result.events) {
      eventsDatabase = result.events;
      const eventsContainer = document.getElementById('realTimeEvents');
      if (eventsContainer) {
        if (result.events.length === 0) {
          eventsContainer.innerHTML = `
            <div class="event-item">
              <div><strong>üîÑ ƒêang ch·ªù d·ªØ li·ªáu t·ª´ Roblox</strong></div>
              <div>Ch·∫°y script trong game ƒë·ªÉ th·∫•y events th·∫≠t</div>
            </div>
          `;
        } else {
          eventsContainer.innerHTML = result.events.map(event => `
            <div class="event-item success">
              <div><strong>${event.boss_name || event.event_type}</strong></div>
              <div>Server: ${event.job_id || 'N/A'} | Players: ${event.players || 'N/A'}</div>
              <div>World: ${event.world || 'N/A'} | Time: ${event.time_of_day || 'N/A'}</div>
              <div class="event-time">${new Date(event.received_at).toLocaleString('vi-VN')}</div>
            </div>
          `).join('');
        }
      }
      
      // C·∫≠p nh·∫≠t danh s√°ch server theo s·ª± ki·ªán
      updateEventServers();
    }
  }

  // H√†m load servers t·ª´ API
  async function loadServers() {
    const result = await callAPI('/events', 'GET');
    
    if (result.success && result.events) {
      const serversMap = new Map();
      
      result.events.forEach(event => {
        if (event.job_id) {
          if (!serversMap.has(event.job_id)) {
            serversMap.set(event.job_id, {
              job_id: event.job_id,
              players: event.players || 'N/A',
              last_event: event.event_type,
              timestamp: event.received_at
            });
          }
        }
      });
      
      activeServers = Array.from(serversMap.values());
      updateServersDisplay();
    }
  }

  // H√†m hi·ªÉn th·ªã servers
  function updateServersDisplay() {
    const serversContainer = document.getElementById('serversList');
    if (!serversContainer) return;

    if (activeServers.length === 0) {
      serversContainer.innerHTML = `
        <div class="server-item">
          <div class="server-info">
            <div class="server-job">üîÑ ƒêang ch·ªù d·ªØ li·ªáu...</div>
            <div>
              <span class="server-players">Ch·∫°y script Roblox ƒë·ªÉ th·∫•y servers th·∫≠t</span>
            </div>
          </div>
        </div>
      `;
    } else {
      serversContainer.innerHTML = activeServers.map(server => `
        <div class="server-item">
          <div class="server-info">
            <div class="server-job">Job: ${server.job_id}..</div>
            <div>
              <span class="server-players">Players: ${server.players}</span>
              <span class="server-wait"> | Event: ${server.last_event}</span>
            </div>
          </div>
          <div class="server-actions">
            <button class="copy-btn" onclick="copyJobId('${server.job_id}')">
              <i class="fas fa-copy"></i> Copy
            </button>
          </div>
        </div>
      `).join('');
    }
  }

  // H√†m c·∫≠p nh·∫≠t danh s√°ch server theo s·ª± ki·ªán
  function updateEventServers() {
    // Nh√≥m server theo s·ª± ki·ªán
    const eventServers = {};
    
    eventsDatabase.forEach(event => {
      const eventType = event.event_type || event.boss_name;
      if (!eventType) return;
      
      if (!eventServers[eventType]) {
        eventServers[eventType] = [];
      }
      
      eventServers[eventType].push({
        job_id: event.job_id,
        players: event.players,
        timestamp: event.received_at
      });
    });
    
    // Hi·ªÉn th·ªã danh s√°ch server theo s·ª± ki·ªán
    const eventsPage = document.getElementById('events');
    if (eventsPage && eventsPage.classList.contains('active')) {
      let eventServersHTML = '';
      
      for (const [eventName, servers] of Object.entries(eventServers)) {
        eventServersHTML += `
          <div class="event-server-card">
            <div class="event-server-header">
              <div class="event-server-title">
                <i class="fas fa-calendar"></i>
                ${eventName}
              </div>
              <div class="event-server-count">${servers.length} server(s)</div>
            </div>
            <div class="event-server-list">
              ${servers.map(server => `
                <div class="event-server-item">
                  <div class="event-server-info">
                    <div class="event-server-job">${server.job_id}</div>
                    <div class="event-server-players">Players: ${server.players}</div>
                  </div>
                  <button class="copy-btn" onclick="copyJobId('${server.job_id}')">
                    <i class="fas fa-copy"></i>
                  </button>
                </div>
              `).join('')}
            </div>
          </div>
        `;
      }
      
      // Th√™m v√†o trang s·ª± ki·ªán
      const existingEventServers = document.querySelector('.event-servers');
      if (existingEventServers) {
        existingEventServers.innerHTML = eventServersHTML;
      } else {
        // T·∫°o container m·ªõi n·∫øu ch∆∞a c√≥
        const eventServersContainer = document.createElement('div');
        eventServersContainer.className = 'event-servers';
        eventServersContainer.innerHTML = eventServersHTML;
        
        // Th√™m v√†o sau card API Log
        const apiLogCard = document.querySelector('#events .card:last-child');
        if (apiLogCard) {
          apiLogCard.insertAdjacentElement('afterend', eventServersContainer);
        }
      }
    }
  }

  // H√†m copy Job ID
  function copyJobId(jobId) {
    navigator.clipboard.writeText(jobId).then(() => {
      alert(`ƒê√£ copy Job ID: ${jobId}`);
    }).catch(err => {
      console.error('L·ªói copy: ', err);
    });
  }

  // Kh·ªüi ch·∫°y ·ª©ng d·ª•ng
  document.addEventListener('DOMContentLoaded', init);

  // T·ª± ƒë·ªông refresh data m·ªói 30 gi√¢y
  setInterval(() => {
    const currentPage = localStorage.getItem("currentPage") || "home";
    if (currentPage === 'events') {
      loadEvents();
    } else if (currentPage === 'servers') {
      loadServers();
    }
  }, 30000);

  console.log("‚úÖ Saki Hub - CH·∫æ ƒê·ªò DATA TH·∫¨T: ƒê√£ t·∫Øt ho√†n to√†n mock data");
</script>
</body>
</html>
